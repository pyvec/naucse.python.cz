
<!doctype html>
<html lang="cs">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <title>
            
                ZaÄÃ¡teÄnickÃ½ kurz PyLadies: StahovÃ¡nÃ­ z internetu a API
            
        </title>

        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/css/bootstrap.min.css" integrity="sha384-PsH8R72JQ3SOdhVi3uxftmaW6Vc51MKb0q5P2rRUpPvrszuE4W1povHYgTpBfshb" crossorigin="anonymous">

        

        <link rel="stylesheet" href="/static/css/naucse.css">
        <link rel="stylesheet" href="/static/css/body.css">
        <link rel="stylesheet" href="/static/css/pygments-lovelace-style.css">
        <link rel="stylesheet" href="/static/css/ipython.css">

        
    


        <style>
            
    

        </style>
    </head>

    <body>
        <nav class="header">
            <ul class="container menu">
                <li><a href="/" class="logo"><h1>NauÄ se Python!</h1></a></li>
                <li><a href="/courses/" class="menu-link"><h2>MateriÃ¡ly</h2></a></li>
                <li><a href="/runs/" class="menu-link"><h2>Kurzy</h2></a></li>
            </ul>
        </nav>

        

<div class="page">
    <div class="container">

        
            <header class="lesson-header">
                <a href="/">NauÄ se Python </a>
                
                > <a href="/runs/">Kurzy</a>
                
                

> <a href="/2019/pyladies-brno-podzim-st/">ZaÄÃ¡teÄnickÃ½ kurz PyLadies</a>

> <a href="/2019/pyladies-brno-podzim-st/sessions/solitaire/">Requests</a>

> <a href="/2019/pyladies-brno-podzim-st/fast-track/requests-weather/">StahovÃ¡nÃ­ z internetu a API</a>


                <hr>
            </header>
        

        
  


        <div class="lesson-content">
          
    

    <h1>StahovÃ¡nÃ­ z internetu a API</h1>
<p>ÄŒÃ¡st tÄ›chto materiÃ¡lÅ¯ pochÃ¡zÃ­ z <a href="https://naucse.python.cz/2019/brno-jaro-knihovny/beginners/kurzovni-listek/">jinÃ©ho kurzu PyLadies</a>.</p>
<h2>Requests</h2>
<p>ZaÄneme seznÃ¡menÃ­m s knihovnou <a href="http://docs.python-requests.org/en/master/">requests</a>. Je to knihovna urÄenÃ¡ pro HTTP
poÅ¾adavky na stranÄ› klienta. Poskytuje mnohem pohodlnÄ›jÅ¡Ã­ rozhranÃ­ neÅ¾
standardnÃ­ knihovna Pythonu.</p>
<p>PrvnÃ­m krokem by mÄ›la bÃ½t instalace ve virtuÃ¡lnÃ­m prostÅ™edÃ­:</p>
<div class="highlight"><pre><span></span><span class="gp">(venv) $ </span>python -m pip install requests
</pre></div><p>PrvnÃ­ pokus je ideÃ¡lnÃ­ provÃ¡dÄ›t v interaktivnÃ­ konzoli Pythonu. ZaÄneme tÃ­m, Å¾e
si naimportujeme modul <code>requests</code>. Komunikace pÅ™es protokol HTTP pouÅ¾Ã­vÃ¡ model
poÅ¾adavek/odpovÄ›Ä (<em>request</em>/<em>response</em>). Klient tedy nejprve poÅ¡le poÅ¾adavek,
a server potom odpovÃ­dÃ¡. Takto se stÅ™Ã­dajÃ­, dokud klient nemÃ¡ vÅ¡e, co
potÅ™ebuje, nebo nedojde k chybÄ›.</p>
<p>Pro zaÄÃ¡tek se podÃ­vÃ¡me na strÃ¡nku <code>https://example.com</code>.</p>
<div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">requests</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"https://example.com/"</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">response</span>
<span class="go">&lt;Response [200]&gt;</span>
</pre></div><p>Takto vypsanÃ¡ odpovÄ›Ä nenÃ­ pÅ™Ã­liÅ¡ uÅ¾iteÄnÃ¡. To naÅ¡tÄ›stÃ­ nenÃ­ zase takovÃ½
problÃ©m. V promÄ›nnÃ© <code>response</code> teÄ mÃ¡me object, kterÃ½ mÃ¡ potÅ™ebnÃ¡ data uloÅ¾enÃ¡
v rÅ¯znÃ½ch atributech.</p>
<p>Zkuste si vypsat, co obsahujÃ­ atributy <code>response.text</code>, <code>response.status_code</code>.
Taky vyzkouÅ¡ejte zavolat metodu <code>response.json()</code>. Existuje jich mnohem vÃ­ce,
ale tyto jsou docela zajÃ­mavÃ© a
relativnÄ› Äasto uÅ¾Ã­vanÃ©.</p>
<p>PojÄme se tedy podÃ­vat, co dÄ›lajÃ­ zmÃ­nÄ›nÃ© jednotlivÃ© atributy:</p>
<p>Atribut <code>text</code> obsahuje tÄ›lo odpovÄ›di, tak jak nÃ¡m ze serveru pÅ™iÅ¡la. Pro
vÄ›tÅ¡inu strÃ¡nek to bude kÃ³d v jazyku HTML, nebo v data v rÅ¯znÃ½ch formÃ¡tech.</p>
<p>KaÅ¾dÃ¡ odpovÄ›Ä od serveru obsahuje ÄÃ­selnÃ½ kÃ³d, kterÃ½ popisuje vÃ½sledek akce.
Tento kÃ³d si mÅ¯Å¾ete pÅ™eÄÃ­st z atributu <code>status_code</code>. <code>1xx</code> jsou informaÄnÃ­
zprÃ¡vy, na kterÃ© moc Äasto nenarazÃ­te. <code>2xx</code> jsou ÃºspÄ›Å¡nÃ© odpovÄ›di. NÄ›kdy se
mÅ¯Å¾e stÃ¡t, Å¾e server mÃ­sto odpovÄ›di, kterou chcete, odeÅ¡le <em>pÅ™esmÄ›rovÃ¡nÃ­</em>. To
mÃ¡ podobu odpovÄ›di s kÃ³dem <code>3xx</code>. PÅ™Ã­mo tuto odpovÄ›Ä neuvidÃ­te, protoÅ¾e
knihovna <code>requests</code> vÃ­, Å¾e je to pÅ™esmÄ›rovÃ¡nÃ­ a proto automaticky pÅ¯jde na
adresu, kam vÃ¡s server poslal.</p>
<p>Ke kaÅ¾dÃ©mu ÄÃ­selnÃ©mu kÃ³du existuje i texotvÃ½ popis. Ty najdete tÅ™eba na
<a href="">Wikipedii</a>, nebo mÅ¯Å¾ete pouÅ¾Ã­t <a href="https://http.cat">https://http.cat</a>.</p>
<div class="admonition note"><p><a href="https://httpbin.org/">https://httpbin.org/</a> je velice uÅ¾iteÄnÃ¡ sluÅ¾ba, pokud si potÅ™ebujete
vyzkouÅ¡et komunikaci pÅ™es HTTP. Bude vÃ¡m odpovÃ­dat na vÅ¡emoÅ¾nÃ© poÅ¾adavky
podle toho, jak si Å™eknete. PodÃ­vejte se v prohlÃ­Å¾eÄi a uvidÃ­te docela pÄ›knÃ½
seznam vÅ¡ech moÅ¾nostÃ­ (akorÃ¡t v angliÄtinÄ›)</p>
</div><p>Nakonec nÃ¡m zÅ¯stÃ¡vÃ¡ metoda <code>json()</code>. JSON je datovÃ½ formÃ¡t, kterÃ½ pouÅ¾Ã­vÃ¡ mnoho
rÅ¯znÃ½ch webovÃ½ch sluÅ¾eb. Proto <code>requests</code> nabÃ­zÃ­ tuto zkratku, jak se k datÅ¯m
dostat. Ale pozor! Pokud v odpovÄ›dit nejsou data v tomto formÃ¡tu, dostanete
chybu!</p>
<h2>Kurzy mÄ›n</h2>
<p>ZaÄneme zvolna - zkusÃ­me si stÃ¡hnout aktuÃ¡lnÃ­ kurzy mÄ›n, kterÃ© poskyuje <a href="https://www.cnb.cz/">ÄŒeskÃ¡
nÃ¡rodnÃ­ banka</a> na adrese:</p>
<p>VÃ½stup pro lidi:</p>
<p><a href="https://www.cnb.cz/cs/financni-trhy/devizovy-trh/kurzy-devizoveho-trhu/kurzy-devizoveho-trhu/">https://www.cnb.cz/cs/financni-trhy/devizovy-trh/kurzy-devizoveho-trhu/kurzy-devizoveho-trhu/</a></p>
<p>VÃ½stup pro vÃ½vojÃ¡Å™e:</p>
<p><a href="https://www.cnb.cz/cs/financni-trhy/devizovy-trh/kurzy-devizoveho-trhu/kurzy-devizoveho-trhu/denni_kurz.txt">https://www.cnb.cz/cs/financni-trhy/devizovy-trh/kurzy-devizoveho-trhu/kurzy-devizoveho-trhu/denni_kurz.txt</a></p>
<h1>PÅ™Ã­klad: JakÃ© bude poÄasÃ­ v BrnÄ›?</h1>
<p>VyzkouÅ¡Ã­me si napsat program, kterÃ½ nÃ¡m dokÃ¡Å¾e zjistit pÅ™edpovÄ›Ä poÄasÃ­ v nÃ¡mi
vybranÃ©m mÄ›stÄ›.</p>
<p>Co k tomu budeme potÅ™ebovat? Znalosti o proudÄ›nÃ­ vzduchu, historickÃ¡ data,
srÃ¡Å¾ky... tak ty to nejsou. Ta uÅ¾ pro nÃ¡s naÅ¡tÄ›stÃ­ pÅ™ipravili jinÃ­ lidÃ© a tyto
informace volnÄ› poskytujÃ­ na internetu. ZbÃ½vÃ¡ tedy se jich akorÃ¡t sprÃ¡vnÄ› doptat.</p>
<h2>OpenWeathermap API</h2>
<p>Existuje mnoho sluÅ¾eb pro vÃ½vojÃ¡Å™e, kterÃ© poskytujÃ­ data o poÄasÃ­ ve strojovÄ›
ÄitelnÃ© formÄ›. JednÃ­m z nich je napÅ™Ã­klad <a href="https://openweathermap.org/">OpenWeatherMap</a></p>
<h3>PÅ™Ã­stup ke sluÅ¾bÄ›</h3>
<p>Data jsou pÅ™Ã­stupnÃ¡ pro kohokoli volnÄ›, jen je tÅ™eba poskytovateli dÃ¡t vÄ›dÄ›t, Å¾e
je pouÅ¾Ã­vÃ¡te zrovna vy. ÄŒastÃ½m zpÅ¯sobem tÃ©to indentifikace je pomocÃ­ tzv.
<em>tokenu</em>, coÅ¾ nenÃ­ nic jinÃ©ho, neÅ¾ nÃ¡hodnÄ› vygenerovanÃ½ Å™etÄ›zec znakÅ¯, kterÃ½
nahrazuje zadÃ¡vÃ¡nÃ­ uÅ¾ivatelskÃ©ho jmÃ©na a hesla. KaÅ¾dÃ½ uÅ¾ivatel mÃ¡ token jinÃ½.</p>
<p>ZaÅ™iÄ si tedy ÃºÄet na <a href="https://home.openweathermap.org">https://home.openweathermap.org</a></p>
<p>Na webu si udÄ›lej registraci (Sign Up) - staÄÃ­ zatrhnout potvrzenÃ­, Å¾e jste
starÅ¡Ã­ 16 let a Å¾e souhlasÃ­te s podmÃ­nkami pouÅ¾itÃ­ tÃ©to sluÅ¾by.</p>
<p>Po odeslÃ¡nÃ­ pak na strÃ¡nce <em>API keys</em> najdeÅ¡ v kolonce <em>Key</em> Å™etÄ›zec podobnÃ½
tomuto (mÅ¯Å¾e to trvat nÄ›kolik minut, neÅ¾ ti pak reÃ¡lnÄ› povolÃ­ pÅ™Ã­stup k datÅ¯m):</p>
<div class="highlight"><pre><code>1faf9fd2f2d64a383e7c0011fa127956</code></pre></div><p>Tento Å™etÄ›zec pouÅ¾ijeme pro vÅ¡echny tvÃ© poÅ¾adavky na zÃ­skÃ¡nÃ­ dat. KvÅ¯li limitÅ¯m
pouÅ¾Ã­vÃ¡nÃ­ tÃ©to sluÅ¾by si ale nechej vygenerovat vlastnÃ­ token. UvedenÃ½ vÃ½Å¡e je
uÅ¾ neplatnÃ½.</p>
<h2>Dotaz na poÄasÃ­</h2>
<p>V <a href="https://openweathermap.org/forecast5#JSON">dokumentaci</a> k API se podÃ­vÃ¡me,
jak mÃ¡ poÅ¾adavek vypadat a jakÃ© parametry mÅ¯Å¾eme pÅ™edat.</p>
<div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">token</span> <span class="o">=</span> <span class="s1">'1faf9fd2f2d64a383e7c0011fa127956'</span>
<span class="n">url</span> <span class="o">=</span> <span class="s1">'http://api.openweathermap.org/data/2.5/forecast'</span>

<span class="n">parametry</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">'APIKEY'</span><span class="p">:</span> <span class="n">token</span><span class="p">,</span>
    <span class="s1">'q'</span><span class="p">:</span> <span class="s1">'brno'</span><span class="p">,</span>
    <span class="s1">'units'</span><span class="p">:</span> <span class="s1">'metric'</span>
<span class="p">}</span>

<span class="n">odpoved</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">parametry</span><span class="p">)</span>
</pre></div><p>Server poskytuje data ve formÃ¡tu JSON, kterÃ½ je velmi rozÅ¡Ã­Å™enÃ½ a knihovna <code>requests</code> pro nÄ›j mÃ¡ metodu, kterÃ¡ odpovÄ›Ä pÅ™evede na slovnÃ­k.</p>
<div class="highlight"><pre><span></span><span class="n">predpoved</span> <span class="o">=</span> <span class="n">odpoved</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
</pre></div><p>V dokumentaci se doÄteme s jakou strukturou mÃ¡me tu Äest. NejsnazÅ¡Ã­ je vÅ¡ak si
ji rovnou vypsat. VypadÃ¡ pÅ™ibliÅ¾nÄ› takto:</p>
<div class="highlight"><pre><code>{'cod': '200',
 'message': 0.0094,
 'cnt': 40,
 'list': [{'dt': 1557122400,
   'main': {'temp': 4.95,
    'temp_min': 4.05,
    'temp_max': 4.95,
    'pressure': 1015.8,
    'sea_level': 1015.8,
    'grnd_level': 958.41,
    'humidity': 74,
    'temp_kf': 0.9},
   'weather': [{'id': 600,
     'main': 'Snow',
     'description': 'light snow',
     'icon': '13d'}],
   'clouds': {'all': 90},
   'wind': {'speed': 5.63, 'deg': 341.687},
   'snow': {'3h': 0.125},
   'sys': {'pod': 'd'},
   'dt_txt': '2019-05-06 06:00:00'},
  {'dt': 1557133200,
   'main': {'temp': 8.92,
    'temp_min': 8.25,
    'temp_max': 8.92,
    'pressure': 1015.93,
    'sea_level': 1015.93,
    'grnd_level': 959,
    'humidity': 57,
    'temp_kf': 0.67},
   'weather': [{'id': 804,
     'main': 'Clouds',
     'description': 'overcast clouds',
     'icon': '04d'}],
   'clouds': {'all': 94},
   'wind': {'speed': 5.99, 'deg': 344.69},
   'sys': {'pod': 'd'},
   'dt_txt': '2019-05-06 09:00:00'},
   ...</code></pre></div><p>NÃ¡s budou nejvÃ­ce zajÃ­mat klÃ­Äe <code>temp</code> (Ãºdaj o teplotÄ›) a <code>dt_txt</code> (tzv. ÄasovÃ©
razÃ­tko).</p>
<p>VypÃ­Å¡eme si je jednoduÅ¡e pod sebe.</p>
<div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">vzorek</span> <span class="ow">in</span> <span class="n">predpoved</span><span class="p">[</span><span class="s1">'list'</span><span class="p">]:</span>
    <span class="n">datum</span> <span class="o">=</span> <span class="n">vzorek</span><span class="p">[</span><span class="s2">"dt_txt"</span><span class="p">]</span>
    <span class="n">teplota</span> <span class="o">=</span> <span class="n">vzorek</span><span class="p">[</span><span class="s1">'main'</span><span class="p">][</span><span class="s1">'temp'</span><span class="p">]</span>

    <span class="k">print</span><span class="p">(</span><span class="n">f</span><span class="s1">'{datum} {teplota}'</span><span class="p">)</span>
</pre></div><p>Takto dostaneme:</p>
<div class="highlight"><pre><code>2019-05-06 06:00:00 6.24
2019-05-06 09:00:00 9.69
2019-05-06 12:00:00 9.96
2019-05-06 15:00:00 9.64
2019-05-06 18:00:00 6.2
2019-05-06 21:00:00 3
2019-05-07 00:00:00 0.62
...</code></pre></div><p>V Å™adÄ› ÄÃ­slech se ale moc dobÅ™e neorientuje. Proto si z nich udÄ›lÃ¡me jednoduchÃ½
textovÃ½ graf. Zkus si vÃ½stup upravit tak, aby se za kaÅ¾dÃ½ stupeÅˆ vypsala jedna
teÄka (3 stupnÄ› <code>...</code>, 10 stupÅˆÅ¯ <code>..........</code>).</p>
<div class="admonition note"><p>Pro zjednoduÅ¡enÃ­ se teÄka nebudeme trÃ¡pit s mrazy (zÃ¡pornou teplotou) - nad
tÃ­m se mÅ¯Å¾eÅ¡ zamyslet potom doma.</p>
</div><div class="solution" id="solution-0">
    <h3>Å˜eÅ¡enÃ­</h3>
    <div class="solution-cover">
        <a href="/2019/pyladies-brno-podzim-st/fast-track/requests-weather/index/solutions/0/"><span class="link-text">UkÃ¡zat Å™eÅ¡enÃ­</span></a>
    </div>
    <div class="solution-body" aria-hidden="true">
        <div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">vzorek</span> <span class="ow">in</span> <span class="n">predpoved</span><span class="p">[</span><span class="s1">'list'</span><span class="p">]:</span>
    <span class="p">(</span><span class="o">...</span><span class="p">)</span>
    <span class="n">sloupek</span> <span class="o">=</span> <span class="s1">'.'</span> <span class="o">*</span> <span class="nb">int</span><span class="p">(</span><span class="n">teplota</span><span class="p">)</span>

    <span class="k">print</span><span class="p">(</span><span class="n">f</span><span class="s1">'{datum} {sloupek} {teplota}'</span><span class="p">)</span>
</pre></div>
    </div>
</div><p>VÃ½sledek bude vypadat nÄ›jak takto:</p>
<div class="highlight"><pre><code>2019-05-05 15:00:00 ....... 7.44
2019-05-05 18:00:00 ..... 5.26
2019-05-05 21:00:00 .... 4.41
2019-05-06 00:00:00 ... 3.68
2019-05-06 03:00:00 .. 2.55
2019-05-06 06:00:00 .... 4.85
2019-05-06 09:00:00 ........ 8.65
2019-05-06 12:00:00 ......... 9.15
2019-05-06 15:00:00 ......... 9.88
2019-05-06 18:00:00 ..... 5.92
2019-05-06 21:00:00 .. 2.11
2019-05-07 00:00:00  0.39
2019-05-07 03:00:00  -0.33
2019-05-07 06:00:00 ..... 5.25
2019-05-07 09:00:00 ......... 9.21
...</code></pre></div><h2>PÅ™idÃ¡vÃ¡me obrÃ¡zky</h2>
<p>ZatÃ­m je naÅ¡e pÅ™edpovÄ›Ä sloÅ¾ena stÃ¡le jen z bÄ›Å¾nÃ½ch ASCII znakÅ¯. PojÄme si tam
pÅ™idat i obrÃ¡zky oblohy.</p>
<p>SouÄÃ¡stÃ­ pÅ™edpovÄ›di je tento Ãºdaj ve formÄ› textu, napÅ™. <code>Clear</code>, <code>Rain</code>, <code>Snow</code>,
<code>Clouds</code>. My se s tÃ­m ale nespokojÃ­me a nahradÃ­me si ho obrÃ¡zky. MÅ¯Å¾eme vyuÅ¾Ã­t
napÅ™Ã­klad ty z Unicode tabulky <a href="http://xahlee.info/comp/unicode_weather_symbols.html">http://xahlee.info/comp/unicode_weather_symbols.html</a></p>
<div class="admonition note"><p>PÃ­sma v pÅ™Ã­kazovÃ© Å™Ã¡dce ve Windows stÃ¡le emoji umÃ­ jen ve velmi omezenÃ© mÃ­Å™e.
ZmÄ›Åˆ si ho doÄasnÄ› na <code>MS Gothic</code>, pokud ho mÃ¡Å¡ nainstalovanÃ©.
MÅ¯Å¾eÅ¡ pouÅ¾Ã­t tÅ™eba tyto vyzkouÅ¡enÃ© znaky z UNICODE tabulky:</p>
<div class="highlight"><pre><code>SNOWFLAKE
CLOUD
UMBRELLA WITH RAIN DROPS
FLOWER
WHITE SMILING FACE
BLACK SMILING FACE</code></pre></div></div><p>Chceme tedy Å™etÄ›zec <code>Snow</code> pÅ™eloÅ¾it na <code>â„</code> a napÃ­Å¡eme si na to funkci.</p>
<div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">ziskej_obrazek</span><span class="p">(</span><span class="n">pocasi</span><span class="p">):</span>
    <span class="n">mapovani</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">'Snow'</span><span class="p">:</span> <span class="s1">'</span><span class="se">\N{SNOWFLAKE}</span><span class="s1">'</span><span class="p">,</span>
        <span class="s1">'Rain'</span><span class="p">:</span> <span class="s1">'</span><span class="se">\N{UMBRELLA WITH RAIN DROPS}</span><span class="s1">'</span><span class="p">,</span>
        <span class="s1">'Clouds'</span><span class="p">:</span> <span class="s1">'</span><span class="se">\N{WHITE SUN WITH SMALL CLOUD}</span><span class="s1">'</span><span class="p">,</span>
        <span class="s1">'Clear'</span><span class="p">:</span> <span class="s1">'</span><span class="se">\N{SUN WITH FACE}</span><span class="s1">'</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="n">mapovani</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">pocasi</span><span class="p">,</span> <span class="s1">'?'</span><span class="p">)</span>
</pre></div><p>Po zakomponovÃ¡nÃ­ do kÃ³du:</p>
<div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">vzorek</span> <span class="ow">in</span> <span class="n">predpoved</span><span class="p">[</span><span class="s1">'list'</span><span class="p">]:</span>
    <span class="n">datum</span> <span class="o">=</span> <span class="n">vzorek</span><span class="p">[</span><span class="s2">"dt_txt"</span><span class="p">]</span>
    <span class="n">teplota</span> <span class="o">=</span> <span class="n">vzorek</span><span class="p">[</span><span class="s1">'main'</span><span class="p">][</span><span class="s1">'temp'</span><span class="p">]</span>
    <span class="n">sloupek</span> <span class="o">=</span> <span class="s1">'.'</span> <span class="o">*</span> <span class="nb">int</span><span class="p">(</span><span class="n">teplota</span><span class="p">)</span>
    <span class="n">pocasi</span> <span class="o">=</span> <span class="n">ziskej_obrazek</span><span class="p">(</span><span class="n">vzorek</span><span class="p">[</span><span class="s1">'weather'</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="s1">'main'</span><span class="p">])</span>

    <span class="k">print</span><span class="p">(</span><span class="n">f</span><span class="s1">'{datum} {pocasi} {sloupek} {teplota} </span><span class="se">\N{DEGREE CELSIUS}</span><span class="s1">'</span><span class="p">)</span>
</pre></div><p>FinÃ¡lnÃ­ podoba pÅ™edpovÄ›di:</p>
<div class="highlight"><pre><code>2019-05-06 09:00:00 ğŸŒ¤ ........ 8.76 â„ƒ
2019-05-06 12:00:00 â˜” ......... 9.37 â„ƒ
2019-05-06 15:00:00 â˜” ......... 9.4 â„ƒ
2019-05-06 18:00:00 â˜” ...... 6.3 â„ƒ
2019-05-06 21:00:00 ğŸŒ¤ ... 3 â„ƒ
2019-05-07 00:00:00 ğŸŒ¤  0.62 â„ƒ
2019-05-07 03:00:00 ğŸŒ  -0.54 â„ƒ
2019-05-07 06:00:00 ğŸŒ ..... 5.25 â„ƒ
2019-05-07 09:00:00 ğŸŒ ......... 9.65 â„ƒ
2019-05-07 12:00:00 â˜” .......... 10.72 â„ƒ
2019-05-07 15:00:00 â˜” .......... 10.12 â„ƒ
2019-05-07 18:00:00 â˜” ....... 7.42 â„ƒ
2019-05-07 21:00:00 â˜” ..... 5.72 â„ƒ
2019-05-08 00:00:00 ğŸŒ¤ ... 3.52 â„ƒ
2019-05-08 03:00:00 ğŸŒ¤ .. 2.25 â„ƒ
2019-05-08 06:00:00 ğŸŒ¤ ...... 6.39 â„ƒ</code></pre></div><p>SluÅ¾ba OpenWeatherMap umÃ­ zjistit pÅ™edpovÄ›Ä poÄasÃ­ nejen pro mÄ›sta, ale libovolnÃ©
mÃ­sto na Zemi, zadanÃ© pomocÃ­ GPS souÅ™adnic. Pro pÅ™evod nÃ¡zvu (napÅ™. hory) na
souÅ™adnice se pouÅ¾Ã­vÃ¡ tzv. geocoding. PoskytovatelÅ¯ tÃ©to sluÅ¾by je opÄ›t mnoho.
JednÃ­m z nich je napÅ™Ã­klad <a href="https://locationiq.com/">https://locationiq.com/</a></p>
<p>API mÅ¯Å¾eme kombinovat dohromady: NÃ¡zev mÃ­sta â†’ GPS souÅ™adniceâ†’ OpenWeatherMap â†’
teploty.</p>


        </div>

        
        <hr class="lesson-end">

        
            <div class="alert alert-info">
                Toto je strÃ¡nka lekce z kurzu, kterÃ½ probÃ­hÃ¡ nebo probÄ›hl naÅ¾ivo s instruktorem.
                
                    
                
            </div>
        


        
    <div class="row prev-next">
        
            
                
    <div class="col text-left">
        <a href="/2019/pyladies-brno-podzim-st/fast-track/http/">â†Â <span class="d-none d-sm-inline">Jak funguje internet</span></a>
    </div>

            
            
                
    <div class="col text-left">
        <a href="/2019/pyladies-brno-podzim-st/sessions/solitaire/">â†‘Â <span class="d-none d-sm-inline">Lekce: Requests</span></a>
    </div>

            
            
                
    <div class="col text-right">
        <a href="/2019/pyladies-brno-podzim-st/intro/json/"><span class="d-none d-sm-inline">JSON</span>Â â†’</a>
    </div>

            
        
    </div>


        

    </div>
</div>



        <script type="text/javascript" src="/static/js/solutions.js"></script>

        <div class="footer container">
            <hr>
            <div class="lesson-attribution">
                
                    <p>
                        Uprav tuto strÃ¡nku na
                        <a href="https://github.com/pyvec/naucse.python.cz/blob/archive/2019-pyladies-brno-podzim-st/lessons/fast-track/requests-weather/index.md">
                            
                                <svg class="icon icon-github" viewBox="0 0 64 64">
<path d="M32 0 C14 0 0 14 0 32 0 53 19 62 22 62 24 62 24 61 24 60 L24 55 C17 57 14 53 13 50 13 50 13 49 11 47 10 46 6 44 10 44 13 44 15 48 15 48 18 52 22 51 24 50 24 48 26 46 26 46 18 45 12 42 12 31 12 27 13 24 15 22 15 22 13 18 15 13 15 13 20 13 24 17 27 15 37 15 40 17 44 13 49 13 49 13 51 20 49 22 49 22 51 24 52 27 52 31 52 42 45 45 38 46 39 47 40 49 40 52 L40 60 C40 61 40 62 42 62 45 62 64 53 64 32 64 14 50 0 32 0 Z" fill="currentColor" stroke-width="0"/>
</svg>
                            
                          GitHubu
                        </a>
                    </p>
                

                
    
        <p>Pro naucse.python.cz napsal Martin PavlÃ¡sek, ÄÃ¡st pÅ™evzata od LubomÃ­ra SedlÃ¡Å™e, 2019.</p>
    

                
    <p>
        Licence:
        <a href="https://creativecommons.org/licenses/by-sa/4.0/">
            Creative Commons Attribution-ShareAlike 4.0 International
        </a>
    </p>
    

                
            </div>
        </div>

        <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.3/umd/popper.min.js" integrity="sha384-vFJXuSJphROIrBnz7yo7oB41mKfc8JzQZiCq4NCceLEaO4IHwicKwpJf9c9IpFgh" crossorigin="anonymous"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/js/bootstrap.min.js" integrity="sha384-alpBpkh1PFOepccYVYDB4do5UnbKysX5WZXm3XxPqe5iKTfUKjNkCk9SaVuEZflJ" crossorigin="anonymous"></script>

        

    </body>
</html>