
<!doctype html>
<html lang="cs">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <title>
            
                DatovÃ½ kurz PyLadies: Webscraping
            
        </title>

        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/css/bootstrap.min.css" integrity="sha384-PsH8R72JQ3SOdhVi3uxftmaW6Vc51MKb0q5P2rRUpPvrszuE4W1povHYgTpBfshb" crossorigin="anonymous">

        

        <link rel="stylesheet" href="/static/css/naucse.css">
        <link rel="stylesheet" href="/static/css/body.css">
        <link rel="stylesheet" href="/static/css/pygments-lovelace-style.css">
        <link rel="stylesheet" href="/static/css/ipython.css">

        
    


        <style>
            
    

        </style>
    </head>

    <body>
        <nav class="header">
            <ul class="container menu">
                <li><a href="/" class="logo"><h1>NauÄ se Python!</h1></a></li>
                <li><a href="/courses/" class="menu-link"><h2>MateriÃ¡ly</h2></a></li>
                <li><a href="/runs/" class="menu-link"><h2>Kurzy</h2></a></li>
            </ul>
        </nav>

        

<div class="page">
    <div class="container">

        
            <header class="lesson-header">
                <a href="/">NauÄ se Python </a>
                
                > <a href="/runs/">Kurzy</a>
                
                

> <a href="/2020/pydata-praha-jaro/">DatovÃ½ kurz PyLadies</a>

> <a href="/2020/pydata-praha-jaro/sessions/webscraping/">Webscraping (virtuÃ¡lnÃ­)</a>

> <a href="/2020/pydata-praha-jaro/pydata/webscraping/">Webscraping</a>


                <hr>
            </header>
        

        
  


        <div class="lesson-content">
          
    

    <div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1>Web scraping</h1>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2>Co je web scraping?</h2>
<ul>
<li>StrojovÃ© ÄtenÃ­ nestrukturovanÃ½ch dat z webovÃ½ch strÃ¡nek</li>
</ul>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2>Co nenÃ­ web scraping?</h2>
<ul>
<li>StahovÃ¡nÃ­ dat pÅ™es API</li>
<li>StahovÃ¡nÃ­ strukturovanÃ½ch dat (JSON, CSV,...)</li>
<li>Crawling - prochÃ¡zenÃ­ a indexovÃ¡nÃ­ celÃ© webovÃ© strÃ¡nky pomocÃ­ jejÃ­ch vnitÅ™nÃ­ch hypertextovÃ½ch odkazÅ¯</li>
</ul>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2>PÅ™Ã­klady web scrapingu</h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3>Jak hodnotila filmy Mirka SpÃ¡ÄilovÃ¡</h3>
<blockquote><p>KdyÅ¾ umÃ­rÃ¡Å¡ a probÄ›hne ti celÃ½ Å¾ivot pÅ™ed oÄima, 
pÅ™ijde Mirka SpÃ¡ÄilovÃ¡ a dÃ¡ tomu 60 %</p>
</blockquote>
<p>Opravdu hodnotÃ­ Mirka SpÃ¡ÄilovÃ¡ vÅ¡echny filmy 60 %? Jde to nÄ›jak ovÄ›Å™it?</p>
<p>Michal BlÃ¡ha stÃ¡hnul z iDnes celkem 1333 ÄlÃ¡nkÅ¯ Mirky SpÃ¡ÄilovÃ© s hodnocenÃ­m filmÅ¯ a vytvoÅ™il tabulku filmÅ¯ a jejich hodnocenÃ­. Å edesÃ¡t procent dostal kaÅ¾dÃ½ tÅ™etÃ­ film :-)</p>
<div>
<img src="static/spacilova.png">
</div><p><a href="https://www.michalblaha.cz/2017/10/filmova-kriticka-mirka-spacilova-v-cislech/">https://www.michalblaha.cz/2017/10/filmova-kriticka-mirka-spacilova-v-cislech/</a></p>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3>AnalÃ½za cen na ÄeskÃ½ch e-shopech</h3>
<p>Co myslÃ­te, mÅ¯Å¾eme vÄ›Å™it 80% slevÃ¡m, kterÃ© vÄ›tÅ¡ina ÄeskÃ½ch e-shopÅ¯ nabÃ­zÃ­ bÄ›hem akcÃ­ typu Black Friday?</p>
<p>V roce 2017 zaÄali v Apify mÄ›sÃ­c pÅ™ed Black Friday dennÄ› monitorovat ceny vÅ¡ech produktÅ¯ v nejvÄ›tÅ¡Ã­ch ÄeskÃ½ch e-shopech. BÄ›hem Black Friday navÃ­c 4x dennÄ› monitorovali ceny produktÅ¯ v kategorii Black Friday.</p>
<p>Co zjistili? PrÅ¯mÄ›rnÃ¡ uvÃ¡dÄ›nÃ¡ sleva byla kolem 30 %, reÃ¡lnÃ¡ kolem 20. 
StaÄÃ­ zvÃ½Å¡it â€pÅ¯vodnÃ­ cenuâ€œ pÅ™ed slevou. NaÅ¡ly se i pÅ™Ã­pady, kdy jste si mohli koupit zboÅ¾Ã­ sice drÃ¡Å¾, ale zato s vÄ›tÅ¡Ã­ slevou.</p>
<p>Projekt se v dalÅ¡Ã­ch letech rozrostl, takÅ¾e dnes si mÅ¯Å¾eme stÃ¡hnout rozÅ¡Ã­Å™enÃ­ do prohlÃ­Å¾eÄe a pÅ™esvÄ›dÄit se sami.</p>
<p></p><div>
    <img src="static/hlidacshopu.png">
</div>
<br>
<a href="https://blog.apify.com/black-friday-po-%C4%8Desku-kouzla-se-slevami-c7c0d2e7eeaa">https://blog.apify.com/black-friday-po-%C4%8Desku-kouzla-se-slevami-c7c0d2e7eeaa</a>
<p><a href="https://medium.com/@jakubbalada/black-friday-2019-s-hl%C3%ADda%C4%8Dem-shop%C5%AF-9a3ddd352a8c">https://medium.com/@jakubbalada/black-friday-2019-s-hl%C3%ADda%C4%8Dem-shop%C5%AF-9a3ddd352a8c</a></p>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2>Etika web scrapingu</h2>
<ul>
<li>NeÅ¾ zaÄneÅ¡ s web scrapingem, podÃ­vej se, jestli strÃ¡nka nenabÃ­zÃ­ strukturovanÃ¡ data ke staÅ¾enÃ­ nebo neposkytuje API.<ul>
<li><strong>PÅ™Ã­klady:</strong> </li>
<li><a href="https://data.gov.cz/datov%C3%A9-sady?poskytovatel=%C4%8Cesk%C3%BD%20statistick%C3%BD%20%C3%BA%C5%99ad">https://data.gov.cz/datov%C3%A9-sady?poskytovatel=%C4%8Cesk%C3%BD%20statistick%C3%BD%20%C3%BA%C5%99ad</a></li>
<li><a href="https://www.ncdc.noaa.gov/data-access">https://www.ncdc.noaa.gov/data-access</a></li>
<li><a href="https://www.mapakriminality.cz/data/">https://www.mapakriminality.cz/data/</a></li>
<li><a href="http://opendata.praha.eu/dataset/meteostanice-chmi-api">http://opendata.praha.eu/dataset/meteostanice-chmi-api</a></li>
</ul>
</li>
<li>Zjisti si, jakÃ¡ mÃ¡Å¡ prÃ¡va k datÅ¯m, nepublikuj zÃ­skanÃ¡ data nelegÃ¡lnÄ›</li>
<li>PÅ™istupuj ke strÃ¡nce k rozumnÃ© mÃ­Å™e, nesnaÅ¾Ã­Å¡ se strÃ¡nku shodit, ale zÃ­skat data :-) </li>
</ul>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2>Z Äeho se sklÃ¡dÃ¡ webovÃ¡ strÃ¡nka</h2>
<ul>
<li><strong>HTML</strong> (HyperText Markup Language): strukturovanÃ½ obsah strÃ¡nky (text a obrÃ¡zky)</li>
<li><strong>CSS</strong> (Cascading Style Sheets): Ãºprava vzhledu strÃ¡nky</li>
<li><strong>JavaScript</strong>: interaktivita obsahu a vzhledu strÃ¡nky</li>
</ul>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3>HTML</h3>
<div>
    <img src="static/html.png">
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<ul>
<li>Je tvoÅ™en HTML znaÄkami / tagy, napÅ™.  <code>&lt;img&gt;</code></li>
<li>VÄ›tÅ¡ina HTML tagÅ¯ je pÃ¡rovÃ¡, napÅ™. <code>&lt;h2&gt;</code> a <code>&lt;/h2&gt;</code></li>
<li>Tagy mohou mÃ­t atributy, kterÃ© dÃ¡le specifikujÃ­, co a jak bude tag zobrazovat</li>
<li>Atribut class se obvykle pouÅ¾Ã­vÃ¡ k stylovÃ¡nÃ­ strÃ¡nky a Äasto podle nÄ›j mÅ¯Å¾eme pÅ™i webscrapingu odliÅ¡it rÅ¯znÃ© ÄÃ¡sti strÃ¡nky</li>
</ul>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3>CSS</h3>
<ul>
<li>Popisuje zpÅ¯sob zobrazenÃ­ html elementÅ¯</li>
<li>Obsahuje 2 ÄÃ¡sti: selektor elementu a blok deklarace:</li>
</ul>
<div class="highlight"><pre><code>p.error {
  color: red;
}</code></pre></div>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2>Instalace</h2>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">InÂ [Â ]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1">#%pip install lxml beautifulsoup4 selenium</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2>Pandas: read_html()</h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Pokud nÃ¡m staÄÃ­ stÃ¡hnout tabulky z webu, mÅ¯Å¾eme pouÅ¾Ã­t knihovnu <a href="https://pandas.pydata.org/pandas-docs/version/0.25/reference/api/pandas.read_html.html">Pandas</a>:</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">InÂ [1]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>PÅ™evedeme tabulky ze strÃ¡nky Wikipedie <a href="https://cs.wikipedia.org/wiki/Seznam_st%C3%A1t%C5%AF_sv%C4%9Bta_podle_spot%C5%99eby_alkoholu">Seznam stÃ¡tÅ¯ svÄ›ta podle spotÅ™eby alkoholu</a> do dataframÅ¯ pomocÃ­ funce <code>read_html()</code>:</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">InÂ [2]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">tables</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_html</span><span class="p">(</span><span class="s1">'https://cs.wikipedia.org/wiki/Seznam_st%C3%A1t%C5%AF_sv%C4%9Bta_podle_spot%C5</span><span class="si">%99e</span><span class="s1">by_alkoholu'</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>VÃ½sledkem je seznam dataframÅ¯:</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">InÂ [3]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="nb">type</span><span class="p">(</span><span class="n">tables</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[3]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>list</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">InÂ [4]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="nb">len</span><span class="p">(</span><span class="n">tables</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[4]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>2</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">InÂ [5]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">tables</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[5]:</div>



<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style>.lesson-content .dataframe tbody tr th:only-of-type {
    vertical-align: middle
    }
.lesson-content .dataframe tbody tr th {
    vertical-align: top
    }
.lesson-content .dataframe thead th {
    text-align: right
    }</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>stÃ¡t</th>
      <th>evidovÃ¡no</th>
      <th>neevidovÃ¡no</th>
      <th>celkem</th>
      <th>pivo</th>
      <th>vÃ­no</th>
      <th>destilÃ¡ty</th>
      <th>ostatnÃ­</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>ÄŒesko</td>
      <td>14.97</td>
      <td>1.48</td>
      <td>16.45</td>
      <td>8.51</td>
      <td>2.33</td>
      <td>3.59</td>
      <td>0.39</td>
    </tr>
    <tr>
      <th>1</th>
      <td>MaÄarsko</td>
      <td>12.27</td>
      <td>4.00</td>
      <td>16.27</td>
      <td>4.42</td>
      <td>4.94</td>
      <td>3.02</td>
      <td>0.14</td>
    </tr>
    <tr>
      <th>2</th>
      <td>Rusko</td>
      <td>11.03</td>
      <td>4.73</td>
      <td>15.76</td>
      <td>3.65</td>
      <td>0.10</td>
      <td>6.88</td>
      <td>0.34</td>
    </tr>
    <tr>
      <th>3</th>
      <td>Ukrajina</td>
      <td>8.10</td>
      <td>7.50</td>
      <td>15.60</td>
      <td>2.69</td>
      <td>0.58</td>
      <td>5.21</td>
      <td>0.02</td>
    </tr>
    <tr>
      <th>4</th>
      <td>Estonsko</td>
      <td>13.77</td>
      <td>1.80</td>
      <td>15.57</td>
      <td>5.53</td>
      <td>1.09</td>
      <td>9.19</td>
      <td>0.43</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Podle WHO je ÄŒesko prvnÃ­! AspoÅˆ v prÅ¯mÄ›rnÃ© spotÅ™ebÄ› alkoholu v letech 2003-2005.</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">InÂ [6]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">tables</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[6]:</div>



<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style>.lesson-content .dataframe tbody tr th:only-of-type {
    vertical-align: middle
    }
.lesson-content .dataframe tbody tr th {
    vertical-align: top
    }
.lesson-content .dataframe thead th {
    text-align: right
    }</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>PoÅ™adÃ­</th>
      <th>StÃ¡t</th>
      <th>SpotÅ™eba v litrech</th>
      <th>Rok</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1</td>
      <td>Francie</td>
      <td>12.6</td>
      <td>2011</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2</td>
      <td>Rakousko</td>
      <td>12.2</td>
      <td>2009</td>
    </tr>
    <tr>
      <th>2</th>
      <td>3</td>
      <td>Estonsko</td>
      <td>12.0</td>
      <td>2011</td>
    </tr>
    <tr>
      <th>3</th>
      <td>4</td>
      <td>NÄ›mecko</td>
      <td>11.7</td>
      <td>2009</td>
    </tr>
    <tr>
      <th>4</th>
      <td>5</td>
      <td>Irsko</td>
      <td>11.6</td>
      <td>2011</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Podle OECD to vypadÃ¡ trochu jinak ğŸ§</p>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><strong>VarovÃ¡nÃ­:</strong> SvÄ›t nenÃ­ ideÃ¡lnÃ­ (proto se v nÄ›m taky tolik pije) a ne vÅ¾dy se podaÅ™Ã­ tabulky pomocÃ­ <code>read_html()</code> zÃ­skat. PÅ™Ã­kaz nemusÃ­ tabulku vÅ¯bec â€vidÄ›tâ€œ, nebo si nedokÃ¡Å¾e poradit s jejÃ­ strukturou.</p>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3>CviÄenÃ­</h3>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>ZÃ­skejte tabulku aktuÃ¡lnÃ­ch ekonomickÃ½ch ÃºdajÅ¯ ze strÃ¡nek <a href="https://www.czso.cz/csu/czso/aktualniinformace">ÄŒeskÃ©ho statistickÃ©ho ÃºÅ™adu</a>, <code>https://www.czso.cz/csu/czso/aktualniinformace</code>.</p>
<p><strong>NÃ¡povÄ›da</strong>: Pokud uvidÃ­Å¡ v dataframu oÅ¡klivÃ© znaky, zkus specifikovat <code>encoding='utf-8'</code></p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">InÂ [Â ]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Pokud data, kterÃ¡ hledÃ¡me, nejsou na webu ve formÄ› tabulky, musÃ­me pÅ™ikroÄit k â€drastiÄtÄ›jÅ¡Ã­mâ€œ nÃ¡strojÅ¯m :-)</p>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2>BeautifulSoup</h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Knihovna <a href="https://www.crummy.com/software/BeautifulSoup/">BeautifulSoup</a> se pouÅ¾Ã­vÃ¡ k zÃ­skÃ¡vÃ¡nÃ­ dat z HTML a XML souborÅ¯. Pracuje s rÅ¯znÃ½mi parsery, kterÃ© analyzujÃ­ HTML soubory, a umoÅ¾nuje vybrat poÅ¾adovanÃ© HTML elementy a pracovat s nimi.</p>
<p>Pod Äarou: Kdybys mÄ›l/a vÄ›tÅ¡Ã­ projekt a potÅ™eboval/a projÃ­t tÅ™eba nÄ›kolik desÃ­tek e-shopÅ¯, podÃ­vej se na knihovnu <a href="http://docs.scrapy.org/en/latest/intro/overview.html">Scrapy</a>, kterÃ¡ je pro podobnÃ© Ãºkoly vhodnÄ›jÅ¡Ã­.</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">InÂ [7]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">bs4</span> <span class="k">import</span> <span class="n">BeautifulSoup</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Nejprve si naÄteme vzorovÃ½ html dokument ze souboru:</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">InÂ [8]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">"static/html_doc.html"</span><span class="p">,</span> <span class="s2">"r"</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">html_doc</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>VytvoÅ™Ã­me objekt typu <code>BeautifulSoup</code>. PrvnÃ­ argument jsou HTML data, druhÃ½ slouÅ¾Ã­ k specifikaci parseru.</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">InÂ [9]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">soup</span> <span class="o">=</span> <span class="n">BeautifulSoup</span><span class="p">(</span><span class="n">html_doc</span><span class="p">,</span> <span class="s1">'html.parser'</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>PomocÃ­ metody <code>prettify()</code> mÅ¯Å¾eme vytisknout hezky zformÃ¡tovanÃ© html:</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">InÂ [10]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1">#print(soup.prettify())</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Po objektu typu <code>BeautifulSoup</code> se mÅ¯Å¾eme pohybovat pomocÃ­ tagÅ¯.<br>
PrvnÃ­ element typu title:</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">InÂ [11]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">soup</span><span class="o">.</span><span class="n">title</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[11]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>&lt;title&gt;PyData Prague | pydata.cz&lt;/title&gt;</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>PrvnÃ­ element typu <code>h1</code>:</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">InÂ [12]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">soup</span><span class="o">.</span><span class="n">h1</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[12]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>&lt;h1&gt;&lt;a href="https://pydata.cz/"&gt;pydata.cz&lt;/a&gt;&lt;/h1&gt;</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>JmÃ©no elementu typu <code>h1</code>:</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">InÂ [13]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">soup</span><span class="o">.</span><span class="n">h1</span><span class="o">.</span><span class="n">name</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[13]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>'h1'</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>JmÃ©no nadÅ™azenÃ©ho elementu (atributy <code>parent</code> a <code>name</code>):</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">InÂ [14]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">soup</span><span class="o">.</span><span class="n">h1</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">name</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[14]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>'div'</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Data uvnitÅ™ elementu <code>h1</code> (atribut <a href="https://www.crummy.com/software/BeautifulSoup/bs4/doc/#string"><code>string</code></a>)</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">InÂ [15]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">soup</span><span class="o">.</span><span class="n">h1</span><span class="o">.</span><span class="n">string</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[15]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>'pydata.cz'</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>PrvnÃ­ element typu <code>h2</code>:</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">InÂ [16]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">soup</span><span class="o">.</span><span class="n">h2</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[16]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>&lt;h2 id="code-of-conduct"&gt;Code of Conduct&lt;/h2&gt;</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Id elementu <code>h2</code>:</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">InÂ [17]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">soup</span><span class="o">.</span><span class="n">h2</span><span class="p">[</span><span class="s1">'id'</span><span class="p">]</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[17]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>'code-of-conduct'</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>MÅ¯Å¾eme najÃ­t i vÅ¡echny tagy danÃ©ho typu, napÅ™ <code>find_all('a')</code> najde vÅ¡echny odkazy:</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">InÂ [18]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">links</span> <span class="o">=</span> <span class="n">soup</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="s1">'a'</span><span class="p">)</span>
<span class="n">links</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[18]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>[&lt;a href="https://pydata.cz/"&gt;pydata.cz&lt;/a&gt;,
 &lt;a class="pydata" href="https://pydata.org/"&gt;PyData&lt;/a&gt;,
 &lt;a href="https://numfocus.org/"&gt;NumFOCUS&lt;/a&gt;,
 &lt;a class="pydata" href="https://pydata.org/code-of-conduct/"&gt;pydata.org/code-of-conduct/&lt;/a&gt;]</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>VÃ½sledky hledÃ¡nÃ­ mÅ¯Å¾eme prochÃ¡zet:</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">InÂ [19]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">links</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s1">'href'</span><span class="p">]</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[19]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>'https://pydata.cz/'</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">InÂ [20]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">links</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">text</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[20]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>'pydata.cz'</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>NemusÃ­me hledat jen podle jmÃ©na tagu, ale i podle jejich atributÅ¯:</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">InÂ [21]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">soup</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="s2">"pydata-prague"</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[21]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>&lt;h1 id="pydata-prague"&gt;PyData Prague&lt;/h1&gt;</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Pokud hledÃ¡me podle tÅ™Ã­dy, memÅ¯Å¾eme pouÅ¾Ã­t <code>soup.find(class="pydata")</code>, protoÅ¾e <code>class</code> je v Pythonu klÃ­ÄovÃ© slovo. MusÃ­me pouÅ¾Ã­t <code>class_</code></p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">InÂ [22]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">soup</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">class_</span><span class="o">=</span><span class="s2">"pydata"</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[22]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>&lt;a class="pydata" href="https://pydata.org/"&gt;PyData&lt;/a&gt;</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><code>class</code> mÅ¯Å¾eme taky napsat jako klÃ­Ä v parametru <code>attrs</code>:</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">InÂ [23]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">soup</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">attrs</span><span class="o">=</span><span class="p">{</span><span class="s1">'class'</span><span class="p">:</span><span class="s1">'pydata'</span><span class="p">})</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[23]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>&lt;a class="pydata" href="https://pydata.org/"&gt;PyData&lt;/a&gt;</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3>CviÄenÃ­</h3>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Vyberte odstavec s id <code>description</code>.</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">InÂ [Â ]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Vyberte vÅ¡echny odkazy s tÅ™Ã­dou <code>pydata</code></p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">InÂ [Â ]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2>Requests</h2>
<p>Knihovna <a href="https://requests.readthedocs.io/en/master/">requests</a> je urÄenÃ¡ pro HTTP dotazy. V naÅ¡em pÅ™Ã­padÄ› ji budeme pouÅ¾Ã­vat pro zÃ­skÃ¡nÃ­ textu webovÃ© strÃ¡nky.</p>
<p>HTTP poÅ¾adavky lze vytvÃ¡Å™et i pomocÃ­ standardnÃ­ knihovny Pythonu, ale <code>requests</code> majÃ­ mnohem lidÅ¡tÄ›jÅ¡Ã­ rozhranÃ­.</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">InÂ [24]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">import</span> <span class="nn">requests</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">InÂ [25]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">'https://pydata.cz/'</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>MÅ¯Å¾eme zkontrolovat nÃ¡vratovÃ½ stav:</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">InÂ [26]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">r</span><span class="o">.</span><span class="n">status_code</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[26]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>200</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><a href="https://cs.wikipedia.org/wiki/Stavov%C3%A9_k%C3%B3dy_HTTP">StavovÃ© kÃ³dy</a> se dÄ›lÃ­ do 5 skupin:</p>
<ul>
<li>1xx â€“ informaÄnÃ­ odpovÄ›Ä</li>
<li>2xx â€“ ÃºspÄ›ch</li>
<li>3xx â€“ pÅ™esmÄ›rovÃ¡nÃ­</li>
<li>4xx â€“ chyba klienta</li>
<li>5xx â€“ chyba serveru</li>
</ul>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Metoda text ukÃ¡Å¾e zdrojovÃ½ kÃ³d strÃ¡nky:</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">InÂ [27]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1">#print(r.text)</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2>BeautifulSoup podruhÃ©: CSS selektory</h2>
<p>S knihovnou BeautifulSoup mÅ¯Å¾eme <a href="https://www.crummy.com/software/BeautifulSoup/bs4/doc/#css-selectors">vyhledÃ¡vat CSS selektory</a> pomocÃ­ funkcÃ­ <code>select</code> (ukÃ¡Å¾e vÅ¡echny prvky) a <code>select_one</code> (najde prvnÃ­ prvek).</p>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>OtevÅ™eme si html dokument s programem kin. Je staÅ¾enÃ½ z <a href="https://dokina.tiscali.cz/program-kin">https://dokina.tiscali.cz/program-kin</a>, ale protoÅ¾e by se mohlo stÃ¡t, Å¾e dnes na programu nic nenÃ­, pouÅ¾ijeme radÅ¡i staÅ¾enou verzi. Pokud na strÃ¡nkÃ¡ch nÄ›co je, mÅ¯Å¾eÅ¡ samozÅ™ejmÄ› pouÅ¾Ã­t <code>requests</code>.</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">InÂ [28]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">"static/kina.html"</span><span class="p">,</span> <span class="s2">"r"</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">html_doc</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
<span class="n">soup</span> <span class="o">=</span> <span class="n">BeautifulSoup</span><span class="p">(</span><span class="n">html_doc</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>ZkusÃ­me najÃ­t vÅ¡echny tagu s tÅ™Ã­dou <code>title</code> a nÄ›kolik z nich si vypÃ­Å¡eme:<br>
(KvÅ¯li pÅ™ehlednosti nevypisujeme ÃºplnÄ› vÅ¡echny)</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">InÂ [29]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">titles</span> <span class="o">=</span> <span class="n">soup</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s1">'.title'</span><span class="p">)</span> 
<span class="n">titles</span><span class="p">[:</span><span class="mi">6</span><span class="p">]</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[29]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>[&lt;h4 class="title mb-0"&gt;3Bobule&lt;/h4&gt;,
 &lt;h4 class="title mb-0"&gt;TichÃ© mÃ­sto: ÄŒÃ¡st II&lt;/h4&gt;,
 &lt;h4 class="title mb-0"&gt;V sÃ­ti&lt;/h4&gt;,
 &lt;h4 class="title mb-0"&gt;Princezna zakletÃ¡ v Äase&lt;/h4&gt;,
 &lt;h4 class="title mb-0"&gt;Bloodshot&lt;/h4&gt;,
 &lt;h3 class="title mb-0"&gt;
 &lt;a data-ga-action="cinema-detail" data-ga-category="program-kin" href="https://dokina.tiscali.cz/evropsky-dum-7435" title="Profil kina"&gt;EvropskÃ½ dÅ¯m&lt;/a&gt;
 &lt;a class="favourite-toggler" data-ga-action="toggle-favorite-cinema" data-ga-category="program-kin" data-id="7435" href="https://dokina.tiscali.cz/program-kin?movie_id=&amp;amp;place_id=&amp;amp;cinema_type=&amp;amp;town_id=&amp;amp;start=25-03-2020#" title="PÅ™idat do oblÃ­benÃ½ch"&gt;&lt;/a&gt;
 &lt;/h3&gt;]</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Najdeme vÅ¡echny tagy typu  <code>&lt;h3 class="title mb-0"&gt;</code> a podÃ­vÃ¡me se na prvnÃ­ z nich:</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">InÂ [30]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">mb0_titles</span> <span class="o">=</span> <span class="n">soup</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s1">'h3.title.mb-0'</span><span class="p">)</span>
<span class="n">mb0_titles</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[30]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>&lt;h3 class="title mb-0"&gt;
&lt;a data-ga-action="cinema-detail" data-ga-category="program-kin" href="https://dokina.tiscali.cz/evropsky-dum-7435" title="Profil kina"&gt;EvropskÃ½ dÅ¯m&lt;/a&gt;
&lt;a class="favourite-toggler" data-ga-action="toggle-favorite-cinema" data-ga-category="program-kin" data-id="7435" href="https://dokina.tiscali.cz/program-kin?movie_id=&amp;amp;place_id=&amp;amp;cinema_type=&amp;amp;town_id=&amp;amp;start=25-03-2020#" title="PÅ™idat do oblÃ­benÃ½ch"&gt;&lt;/a&gt;
&lt;/h3&gt;</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Najdeme vÅ¡echny tagy s tÅ™Ã­dou <code>title</code> uvnitÅ™ tagÅ¯ s tÅ™Ã­dou <code>movie-item</code></p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">InÂ [31]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">soup</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s1">'.movie-item .title '</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[31]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>[&lt;h4 class="title mb-0"&gt;3Bobule&lt;/h4&gt;,
 &lt;h4 class="title mb-0"&gt;TichÃ© mÃ­sto: ÄŒÃ¡st II&lt;/h4&gt;,
 &lt;h4 class="title mb-0"&gt;V sÃ­ti&lt;/h4&gt;,
 &lt;h4 class="title mb-0"&gt;Princezna zakletÃ¡ v Äase&lt;/h4&gt;,
 &lt;h4 class="title mb-0"&gt;Bloodshot&lt;/h4&gt;,
 &lt;h4 class="title mb-0"&gt;A dÃ½chejte klidnÄ›&lt;/h4&gt;,
 &lt;h4 class="title mb-0"&gt;SviÅˆa&lt;/h4&gt;,
 &lt;h4 class="title mb-0"&gt;KrÃ¡lÃ­Äek Jojo&lt;/h4&gt;,
 &lt;h4 class="title mb-0"&gt;La belle saison&lt;/h4&gt;,
 &lt;h4 class="title mb-0"&gt;VÃ½jimeÄnÃ­&lt;/h4&gt;,
 &lt;h4 class="title mb-0"&gt;La Llorona&lt;/h4&gt;,
 &lt;h4 class="title mb-0"&gt;Morgiana&lt;/h4&gt;,
 &lt;h4 class="title mb-0"&gt;NoÄnÃ­ ostraha&lt;/h4&gt;,
 &lt;h4 class="title mb-0"&gt;Vita and Virginia&lt;/h4&gt;,
 &lt;h4 class="title mb-0"&gt;Volej mÃ¡mu&lt;/h4&gt;,
 &lt;h4 class="title mb-0"&gt;ÄŒas beznadÄ›je&lt;/h4&gt;,
 &lt;h4 class="title mb-0"&gt;Å arlatÃ¡n&lt;/h4&gt;,
 &lt;h4 class="title mb-0"&gt;Å½aluji!&lt;/h4&gt;]</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2>NÃ¡stroje v prohlÃ­Å¾eÄi</h2>
<p>NeÅ¾ zaÄneme prochÃ¡zet strÃ¡nku pomocÃ­ Pythonu, je dobrÃ© podÃ­vat se na jejÃ­ strukturu pÅ™Ã­mo v prohlÃ­Å¾eÄi.</p>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3>ZdrojovÃ½ kÃ³d strÃ¡nky</h3>
<p><br></p>
<div>
<img src="static/FF_pagesource.png">
<img src="static/chrome_pagesource.png"> 
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3>Prozkoumat prvek / Inspect</h3>
<p><br></p>
<p></p><div>
<img src="static/FF_inspect.png">
<br>
<img src="static/Inspect.png"> 
</div>
<br>
<strong>Pozor:</strong> ZrojovÃ½ kÃ³d vybranÃ©ho prvku nemusÃ­ odpovÃ­dat kÃ³du, kterÃ½ stÃ¡hneÅ¡ pomocÃ­ Pythonu. BÄ›hem zobrazenÃ­ v prohlÃ­Å¾eÄi mohl bÃ½t zmÄ›nÄ›n JavaScriptem.
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3>NÃ¡stroje pro vÃ½vojÃ¡Å™e</h3>
<p><br></p>
<div>
<img src="static/FF_dev.png">
<br>
<img src="static/chrome_dev.png"> 
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><strong>PoznÃ¡mka:</strong> Pokud v zÃ¡loÅ¾ce Network nic nevidÃ­Å¡, zkus obnovit strÃ¡nku.</p>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2>PÅ™Ã­klad z (ne)Å¾ivota</h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><strong>Extrakce dat o 20 nejlepÅ¡Ã­ch filmech podle ÄŒSFD</strong></p>
<p>Chceme vytvoÅ™it tabulku s nÃ¡sledujÃ­cÃ­mi sloupci:</p>
<ul>
<li>NÃ¡zev filmu</li>
<li>PrÅ¯mÄ›rnÃ© hodnocenÃ­</li>
<li>ZemÄ› pÅ¯vodu</li>
<li>Rok uvedenÃ­</li>
<li>DÃ©lka filmu</li>
<li>ReÅ¾isÃ©r</li>
</ul>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><em>Na scraping nenÃ­ univerzÃ¡lnÃ­ nÃ¡vod. Obvykle metodou pokus-omyl zkouÅ¡Ã­me, co bude fungovat. Pak pÅ™ijde aktualizace strÃ¡nek a mÅ¯Å¾eme zaÄÃ­t znovu...</em></p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">InÂ [32]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">url</span> <span class="o">=</span> <span class="s1">'https://www.csfd.cz/zebricky/nejlepsi-filmy/'</span>
<span class="c1"># strÃ¡nka odmÃ­tÃ¡ GET requesty bez identifikace User-Agenta:</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span><span class="s1">'User-Agent'</span><span class="p">:</span> <span class="s1">'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/79.0.3945.117 Safari/537.36'</span><span class="p">}</span>
<span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>
<span class="n">soup</span> <span class="o">=</span> <span class="n">BeautifulSoup</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">text</span><span class="p">,</span> <span class="s1">'html.parser'</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3>Ãškol:</h3>
<p>PodÃ­vej se do zdrojovÃ©ho kÃ³du strÃ¡nky. JakÃ© prvky budeme na strÃ¡nce hledat? A kde najdeme informace o reÅ¾isÃ©rovi?</p>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>PodÃ­vÃ¡me se, jak vypadajÃ­ prvky tÅ™Ã­dy <code>film</code>:</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">InÂ [33]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">soup</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s1">'.film'</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[33]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>&lt;td class="film" id="chart-2294"&gt;&lt;a href="/film/2294-vykoupeni-z-veznice-shawshank/"&gt;VykoupenÃ­ z vÄ›znice Shawshank&lt;/a&gt; &lt;span class="film-year" dir="ltr"&gt;(1994)&lt;/span&gt;&lt;/td&gt;</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Abychom zÃ­skali dalÅ¡Ã­ informace o filmech, musÃ­me se dostat na strÃ¡nku filmu. K tomu budeme potÅ™ebovat odkazy:</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">InÂ [34]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">film_odkazy</span> <span class="o">=</span> <span class="n">soup</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s1">'.film a'</span><span class="p">)</span>
<span class="n">film_odkazy</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[34]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>&lt;a href="/film/2294-vykoupeni-z-veznice-shawshank/"&gt;VykoupenÃ­ z vÄ›znice Shawshank&lt;/a&gt;</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">InÂ [35]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">odkazy</span> <span class="o">=</span> <span class="p">[</span><span class="s1">'https://www.csfd.cz'</span> <span class="o">+</span> <span class="n">film</span><span class="p">[</span><span class="s1">'href'</span><span class="p">]</span> <span class="k">for</span> <span class="n">film</span> <span class="ow">in</span> <span class="n">film_odkazy</span><span class="p">]</span>
<span class="n">odkazy</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[35]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>'https://www.csfd.cz/film/2294-vykoupeni-z-veznice-shawshank/'</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Rovnou si uloÅ¾Ã­me i nÃ¡zvy filmÅ¯:</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">InÂ [36]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">nazvy</span> <span class="o">=</span> <span class="p">[</span><span class="n">film</span><span class="o">.</span><span class="n">text</span> <span class="k">for</span> <span class="n">film</span> <span class="ow">in</span> <span class="n">film_odkazy</span><span class="p">]</span>
<span class="n">nazvy</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[36]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>'VykoupenÃ­ z vÄ›znice Shawshank'</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>PrÅ¯mÄ›rnÃ© hodnocenÃ­ najdeme v prvcÃ­ch s tÅ™Ã­dou <code>average</code>:</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">InÂ [37]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">soup</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s1">'.average'</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[37]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>&lt;td class="average"&gt;95,3%&lt;/td&gt;</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">InÂ [38]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">hodnoceni</span> <span class="o">=</span> <span class="p">[</span><span class="n">aver</span><span class="o">.</span><span class="n">text</span> <span class="k">for</span> <span class="n">aver</span> <span class="ow">in</span> <span class="n">soup</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s1">'.average'</span><span class="p">)]</span>
<span class="n">hodnoceni</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[38]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>'95,3%'</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3>Informace o jednotlivÃ½ch filmech</h3>
<p>NejdÅ™Ã­v si zkusÃ­me najÃ­t informace o prvnÃ­m filmu:</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">InÂ [39]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">odkazy</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>
<span class="n">film_soup</span> <span class="o">=</span> <span class="n">BeautifulSoup</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">text</span><span class="p">,</span> <span class="s1">'html.parser'</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">InÂ [40]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">film_soup</span><span class="o">.</span><span class="n">select_one</span><span class="p">(</span><span class="s1">'.origin'</span><span class="p">)</span><span class="o">.</span><span class="n">text</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[40]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>'USA, 1994, 142 min'</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">InÂ [41]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">film_soup</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">'span'</span><span class="p">,</span> <span class="p">{</span><span class="s1">'itemprop'</span><span class="p">:</span> <span class="s1">'director'</span><span class="p">})</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[41]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>&lt;span data-truncate="60" itemprop="director"&gt;
&lt;a href="/tvurce/2869-frank-darabont/"&gt;Frank Darabont&lt;/a&gt;
&lt;/span&gt;</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">InÂ [42]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">film_soup</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">'span'</span><span class="p">,</span> <span class="p">{</span><span class="s1">'itemprop'</span><span class="p">:</span> <span class="s1">'director'</span><span class="p">})</span><span class="o">.</span><span class="n">a</span><span class="o">.</span><span class="n">text</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[42]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>'Frank Darabont'</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>HurÃ¡! Funguje to. MÅ¯Å¾eme to udÄ›lat se vÅ¡emi filmy.</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">InÂ [43]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">time</span> <span class="k">import</span> <span class="n">sleep</span>
<span class="kn">import</span> <span class="nn">re</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>PoznÃ¡mka pod Äarou: <code>re</code> je modul standardnÃ­ knihovny pro prÃ¡ci s Å™etÄ›zci pomocÃ­ regulÃ¡rnÃ­ch vÃ½razÅ¯. V nÃ¡sledujÃ­cÃ­m kÃ³du ji pouÅ¾ijeme pro rozdÄ›lenÃ­ Å™etÄ›zce podle dvou rÅ¯znÃ½ch znakÅ¯.</p>
<p>PotÅ™ebujeme vyÅ™eÅ¡it pÅ™Ã­pady typu  <code>166 min (Director's cut: 175 min, AlternativnÃ­: 152 min)</code>, proto dÄ›lÃ­me text podle znakÅ¯ "," a "("</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">InÂ [44]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">zeme</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">roky</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">delky</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">reziseri</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">odkaz</span> <span class="ow">in</span> <span class="n">odkazy</span><span class="p">:</span>
    <span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">odkaz</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>
    <span class="n">film_soup</span> <span class="o">=</span> <span class="n">BeautifulSoup</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">text</span><span class="p">,</span> <span class="s1">'html.parser'</span><span class="p">)</span>
    <span class="n">txt</span> <span class="o">=</span> <span class="n">film_soup</span><span class="o">.</span><span class="n">select_one</span><span class="p">(</span><span class="s1">'.origin'</span><span class="p">)</span><span class="o">.</span><span class="n">text</span>
    <span class="n">puvod</span><span class="p">,</span> <span class="n">rok</span><span class="p">,</span> <span class="n">cas</span><span class="p">,</span> <span class="o">*</span><span class="n">zbytek</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">',|\('</span><span class="p">,</span> <span class="n">txt</span><span class="p">)</span> 
    <span class="n">reziser</span> <span class="o">=</span> <span class="n">film_soup</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">'span'</span><span class="p">,</span> <span class="p">{</span><span class="s1">'itemprop'</span><span class="p">:</span> <span class="s1">'director'</span><span class="p">})</span><span class="o">.</span><span class="n">a</span><span class="o">.</span><span class="n">text</span>
    <span class="n">zeme</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">puvod</span><span class="p">)</span>
    <span class="n">roky</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">rok</span><span class="p">)</span>
    <span class="n">delky</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">cas</span><span class="p">)</span>
    <span class="n">reziseri</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">reziser</span><span class="p">)</span>
    <span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="c1"># chovÃ¡me se lidsky :-)</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">InÂ [45]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">filmy_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">nazvy</span><span class="p">,</span> <span class="n">zeme</span><span class="p">,</span> <span class="n">roky</span><span class="p">,</span> <span class="n">reziseri</span><span class="p">,</span> <span class="n">delky</span><span class="p">,</span> <span class="n">hodnoceni</span><span class="p">),</span> 
                        <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">'NÃ¡zev'</span><span class="p">,</span> 
                                 <span class="s1">'PÅ¯vod'</span><span class="p">,</span> 
                                 <span class="s1">'Rok'</span><span class="p">,</span> 
                                 <span class="s1">'ReÅ¾ie'</span><span class="p">,</span> 
                                 <span class="s1">'DÃ©lka'</span><span class="p">,</span> 
                                 <span class="s1">'ÄŒSFD'</span><span class="p">])</span>
<span class="n">filmy_df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[45]:</div>



<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style>.lesson-content .dataframe tbody tr th:only-of-type {
    vertical-align: middle
    }
.lesson-content .dataframe tbody tr th {
    vertical-align: top
    }
.lesson-content .dataframe thead th {
    text-align: right
    }</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>NÃ¡zev</th>
      <th>PÅ¯vod</th>
      <th>Rok</th>
      <th>ReÅ¾ie</th>
      <th>DÃ©lka</th>
      <th>ÄŒSFD</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>VykoupenÃ­ z vÄ›znice Shawshank</td>
      <td>USA</td>
      <td>1994</td>
      <td>Frank Darabont</td>
      <td>142 min</td>
      <td>95,3%</td>
    </tr>
    <tr>
      <th>1</th>
      <td>Forrest Gump</td>
      <td>USA</td>
      <td>1994</td>
      <td>Robert Zemeckis</td>
      <td>142 min</td>
      <td>94,5%</td>
    </tr>
    <tr>
      <th>2</th>
      <td>ZelenÃ¡ mÃ­le</td>
      <td>USA</td>
      <td>1999</td>
      <td>Frank Darabont</td>
      <td>188 min</td>
      <td>92,8%</td>
    </tr>
    <tr>
      <th>3</th>
      <td>PÅ™elet nad kukaÄÄÃ­m hnÃ­zdem</td>
      <td>USA</td>
      <td>1975</td>
      <td>MiloÅ¡ Forman</td>
      <td>133 min</td>
      <td>92,5%</td>
    </tr>
    <tr>
      <th>4</th>
      <td>Sedm</td>
      <td>USA</td>
      <td>1995</td>
      <td>David Fincher</td>
      <td>127 min</td>
      <td>92,4%</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2>Jak na JavaScript</h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Pokud webovÃ¡ strÃ¡nka pouÅ¾Ã­vÃ¡ JavaScript k generovÃ¡nÃ­ obsahu, mÃ¡me dvÄ› moÅ¾nosti:</p>
<ol>
<li>Pochopit, co JavaScript dÄ›lÃ¡, a zaÅ™Ã­dit se podle toho</li>
<li>Chovat se jako browser</li>
</ol>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3>PÅ™Ã­klad</h3>
<p>VÃ½sledky zÃ¡vodu Big's Backyard Ultra, <a href="https://my.raceresult.com/139372/#0_2C3B48"><code>https://my.raceresult.com/139372/#0_2C3B48</code></a></p>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<div>
  <img src="static/bigdog.png">
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">InÂ [46]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">'https://my.raceresult.com/139372/#0_2C3B48'</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>ZkusÃ­me najÃ­t v textu strÃ¡nky slovo Gavin.</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">InÂ [47]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">r</span><span class="o">.</span><span class="n">text</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">"Gavin"</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[47]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>-1</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Nic. Kde se stala chyba? Vytiskneme si zdrojovÃ½ kÃ³d strÃ¡nky... a tabulka nikde!</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">InÂ [48]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1">#print(r.text)</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3>MoÅ¾nost 1: Developer tools - Network</h3>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Pokud nÃ¡m jde o data jen z jednÃ© webovÃ© strÃ¡nky, mÅ¯Å¾eme pomocÃ­ nÃ¡strojÅ¯ pro vÃ½vojÃ¡Å™e zjistit, co javascript na strÃ¡nce dÄ›lÃ¡. ZajÃ­mÃ¡ nÃ¡s, kde bere strÃ¡nka data.</p>
<p>OtevÅ™eme si nÃ¡stroje pro vÃ½vojÃ¡Å™e a rozklikneme zÃ¡loÅ¾ku Network. Pokud na nÃ­ nic nenÃ­, strÃ¡nku refreshujeme. Typicky nÃ¡s zajÃ­majÃ­ dotazy typu <code>XMLHttpRequest</code> (XHR), kterÃ© strÃ¡nce umoÅ¾ÅˆujÃ­ zÃ­skÃ¡vat data z nÄ›jakÃ© URL.</p>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<div>
  <img src="static/bigdog2.png">
<br>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>V naÅ¡em pÅ™Ã­padÄ› vidÃ­me dva dotazy typu XHR, podÃ­vÃ¡me se na nÄ› blÃ­Å¾, abychom zjistili, kterÃ½ z nich obsahuje hledanÃ¡ data. ZkopÃ­rujeme si adresu odkazu.</p>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<div>
  <img src="static/bigdog4.png">
<br>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<div>
  <img src="static/bigdog5.png">
<br>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">InÂ [49]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">'https://my2.raceresult.com/RRPublish/data/list.php?eventid=139372&amp;key=3a52cf488ad3dfe5c994f6b203e7c2e8&amp;listname=Result+Lists%7CLap+Details&amp;page=results&amp;contest=0&amp;r=all&amp;l=0'</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">InÂ [50]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1">#r.text</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">InÂ [51]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1">#r.json()['data']</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">InÂ [52]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">r</span><span class="o">.</span><span class="n">json</span><span class="p">()[</span><span class="s1">'data'</span><span class="p">][</span><span class="s1">'#1_1///Gavin Woody///40Laps'</span><span class="p">]</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[52]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>[['1', '1', '7:35:18', '55:19', '04:40'],
 ['1', '2', '8:35:23', '55:24', '04:35'],
 ['1', '3', '9:34:25', '54:26', '05:33'],
 ['1', '4', '10:35:09', '55:10', '04:49'],
 ['1', '5', '11:33:55', '53:56', '06:03'],
 ['1', '6', '12:34:23', '54:24', '05:35'],
 ['1', '7', '13:33:35', '53:36', '06:23'],
 ['1', '8', '14:33:57', '53:58', '06:01'],
 ['1', '9', '15:34:07', '54:08', '05:51'],
 ['1', '10', '16:34:39', '54:40', '05:19'],
 ['1', '11', '17:35:17', '55:18', '04:41'],
 ['1', '12', '18:34:22', '54:23', '05:36'],
 ['1', '13', '19:25:29', '45:30', '14:29'],
 ['1', '14', '20:28:55', '48:56', '11:03'],
 ['1', '15', '21:30:22', '50:23', '09:36'],
 ['1', '16', '22:27:05', '47:06', '12:53'],
 ['1', '17', '23:28:05', '48:06', '11:53'],
 ['1', '18', '24:28:35', '48:36', '11:23'],
 ['1', '19', '25:27:17', '47:18', '12:41'],
 ['1', '20', '26:28:12', '48:13', '11:46'],
 ['1', '21', '27:28:15', '48:16', '11:43'],
 ['1', '22', '28:26:35', '46:36', '13:23'],
 ['1', '23', '29:26:29', '46:30', '13:29'],
 ['1', '24', '30:27:35', '47:36', '12:23'],
 ['1', '25', '31:34:26', '54:27', '05:32'],
 ['1', '26', '32:32:42', '52:43', '07:16'],
 ['1', '27', '33:32:27', '52:28', '07:31'],
 ['1', '28', '34:34:26', '54:27', '05:32'],
 ['1', '29', '35:33:34', '53:35', '06:24'],
 ['1', '30', '36:33:37', '53:38', '06:21'],
 ['1', '31', '37:33:08', '53:09', '06:50'],
 ['1', '32', '38:34:02', '54:03', '05:56'],
 ['1', '33', '39:33:41', '53:42', '06:17'],
 ['1', '34', '40:33:59', '54:00', '05:59'],
 ['1', '35', '41:33:41', '53:42', '06:17'],
 ['1', '36', '42:36:38', '56:39', '03:20'],
 ['1', '37', '43:34:18', '54:19', '05:40'],
 ['1', '38', '44:33:52', '53:53', '06:06'],
 ['1', '39', '45:30:33', '50:34', '09:25'],
 ['1', '40', '46:31:21', '51:22', '08:37']]</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3>MoÅ¾nost 2: Headless browsers</h3>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><strong>Selenium</strong> je knihovna urÄenÃ¡ na automatizaci testovÃ¡nÃ­ webovÃ½ch aplikacÃ­. UmoÅ¾Åˆuje spustit a ovlÃ¡dat prohlÃ­Å¾eÄ, takÅ¾e s nÃ­ mÅ¯Å¾ete dÄ›lat prakticky vÅ¡echno, co obvykle dÄ›lÃ¡te na webu. TÅ™eba automaticky vyplÅˆovat formulÃ¡Å™e nebo stahovat data.</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">InÂ [53]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">selenium</span> <span class="k">import</span> <span class="n">webdriver</span>
<span class="kn">from</span> <span class="nn">selenium.webdriver.firefox.options</span> <span class="k">import</span> <span class="n">Options</span>  
<span class="c1">#from selenium.webdriver.chrome.options import Options  </span>
<span class="kn">from</span> <span class="nn">selenium.webdriver.common.by</span> <span class="k">import</span> <span class="n">By</span>
<span class="kn">from</span> <span class="nn">selenium.webdriver.support.ui</span> <span class="k">import</span> <span class="n">WebDriverWait</span>
<span class="kn">from</span> <span class="nn">selenium.webdriver.support</span> <span class="k">import</span> <span class="n">expected_conditions</span> <span class="k">as</span> <span class="n">EC</span>
<span class="kn">from</span> <span class="nn">selenium.common.exceptions</span> <span class="k">import</span> <span class="n">TimeoutException</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">InÂ [54]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">options</span> <span class="o">=</span> <span class="n">Options</span><span class="p">()</span> 
<span class="n">options</span><span class="o">.</span><span class="n">headless</span> <span class="o">=</span> <span class="kc">True</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>NemÃ¡Å¡-li chromedriver nebo geckodriver (pro Firefox), stÃ¡hneÅ¡ je tady:</p>
<ul>
<li><a href="https://sites.google.com/a/chromium.org/chromedriver/home">https://sites.google.com/a/chromium.org/chromedriver/home</a></li>
<li><a href="https://github.com/mozilla/geckodriver/releases">https://github.com/mozilla/geckodriver/releases</a></li>
</ul>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">InÂ [55]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">driver</span> <span class="o">=</span> <span class="n">webdriver</span><span class="o">.</span><span class="n">Firefox</span><span class="p">(</span><span class="n">options</span><span class="o">=</span><span class="n">options</span><span class="p">)</span>
<span class="c1">#driver = webdriver.Chrome(options=options)</span>
<span class="n">driver</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">'https://my3.raceresult.com/139372/#0_2C3B48'</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<div>
  <img src="static/bigdog3.png">
<br>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>StÃ¡hneme tabulku s tÅ™Ã­dou <code>MainTable</code>:</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">InÂ [56]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">try</span><span class="p">:</span> <span class="c1"># ÄekÃ¡me 5 s, jestli se tabulka natÃ¡hne </span>
    <span class="n">table</span> <span class="o">=</span> <span class="n">WebDriverWait</span><span class="p">(</span><span class="n">driver</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span><span class="o">.</span><span class="n">until</span><span class="p">(</span><span class="n">EC</span><span class="o">.</span><span class="n">presence_of_element_located</span><span class="p">((</span><span class="n">By</span><span class="o">.</span><span class="n">CLASS_NAME</span><span class="p">,</span> <span class="s1">'MainTable'</span><span class="p">)))</span> 
<span class="k">except</span> <span class="n">TimeoutException</span><span class="p">:</span> 
    <span class="nb">print</span><span class="p">(</span><span class="s2">"Time out!"</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">InÂ [57]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">table</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[57]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>&lt;selenium.webdriver.firefox.webelement.FirefoxWebElement (session="a900b51a-9168-024d-ae19-5291d48f166d", element="8744ffeb-6ae3-0b43-983b-24ebdf28152c")&gt;</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">InÂ [58]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">txt</span> <span class="o">=</span> <span class="n">table</span><span class="o">.</span><span class="n">text</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">InÂ [59]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">txt</span><span class="p">[:</span><span class="mi">1000</span><span class="p">])</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>  #
Measurement
Lap Split
Rest Time
  1
Gavin Woody
40Laps
1 7:35:18 55:19 04:40  
2 8:35:23 55:24 04:35  
3 9:34:25 54:26 05:33  
4 10:35:09 55:10 04:49  
5 11:33:55 53:56 06:03  
6 12:34:23 54:24 05:35  
7 13:33:35 53:36 06:23  
8 14:33:57 53:58 06:01  
9 15:34:07 54:08 05:51  
10 16:34:39 54:40 05:19  
11 17:35:17 55:18 04:41  
12 18:34:22 54:23 05:36  
13 19:25:29 45:30 14:29  
14 20:28:55 48:56 11:03  
15 21:30:22 50:23 09:36  
16 22:27:05 47:06 12:53  
17 23:28:05 48:06 11:53  
18 24:28:35 48:36 11:23  
19 25:27:17 47:18 12:41  
20 26:28:12 48:13 11:46  
21 27:28:15 48:16 11:43  
22 28:26:35 46:36 13:23  
23 29:26:29 46:30 13:29  
24 30:27:35 47:36 12:23  
25 31:34:26 54:27 05:32  
26 32:32:42 52:43 07:16  
27 33:32:27 52:28 07:31  
28 34:34:26 54:27 05:32  
29 35:33:34 53:35 06:24  
30 36:33:37 53:38 06:21  
31 37:33:08 53:09 06:50  
32 38:34:02 54:03 05:56  
33 39:33:41 53:42 06:17  
34 40:33:59 54:00 05:59  
35 41:33:41 53:42 06:17  
36 42:36:38 56:39 03:20  
37 43:34:18 54:19
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">InÂ [60]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">driver</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
<span class="n">driver</span><span class="o">.</span><span class="n">quit</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2>ZÃ¡vÄ›rem</h2>
<p>NauÄili jsme se jak zÃ­skat data i bez API nebo CSV soubourÅ¯. NesmÃ­me u toho ale zapomÃ­nat na dodrÅ¾ovÃ¡nÃ­ zÃ¡konÅ¯ a etiky. Webscraping zkouÅ¡ej vÅ¾dy aÅ¾ jako poslednÃ­ moÅ¾nost, staÄÃ­ sebemenÅ¡Ã­ zmÄ›na na strÃ¡nce a tvÅ¯j postup pÅ™estane fungovat.</p>
</div>
</div>
</div>
 




        </div>

        
        <hr class="lesson-end">

        
            <div class="alert alert-info">
                Toto je strÃ¡nka lekce z kurzu, kterÃ½ probÃ­hÃ¡ nebo probÄ›hl naÅ¾ivo s instruktorem.
                
            </div>
        


        
    <div class="row prev-next">
        
            
            
                
    <div class="col text-left">
        <a href="/2020/pydata-praha-jaro/sessions/webscraping/">â†‘Â <span class="d-none d-sm-inline">Lekce: Webscraping (virtuÃ¡lnÃ­)</span></a>
    </div>

            
            
                
    <div class="col text-right">
        <a href="/2020/pydata-praha-jaro/sessions/webscraping/back/"><span class="d-none d-sm-inline">ZÃ¡vÄ›r lekce</span>Â â†’</a>
    </div>

            
        
    </div>


        

    </div>
</div>



        <script type="text/javascript" src="/static/js/solutions.js"></script>

        <div class="footer container">
            <hr>
            <div class="lesson-attribution">
                
                    <p>
                        Uprav tuto strÃ¡nku na
                        <a href="https://github.com/pyvec/naucse.python.cz/blob/archive/2020-pydata-praha-jaro/lessons/pydata/webscraping/index.ipynb">
                            
                                <svg class="icon icon-github" viewBox="0 0 64 64">
<path d="M32 0 C14 0 0 14 0 32 0 53 19 62 22 62 24 62 24 61 24 60 L24 55 C17 57 14 53 13 50 13 50 13 49 11 47 10 46 6 44 10 44 13 44 15 48 15 48 18 52 22 51 24 50 24 48 26 46 26 46 18 45 12 42 12 31 12 27 13 24 15 22 15 22 13 18 15 13 15 13 20 13 24 17 27 15 37 15 40 17 44 13 49 13 49 13 51 20 49 22 49 22 51 24 52 27 52 31 52 42 45 45 38 46 39 47 40 49 40 52 L40 60 C40 61 40 62 42 62 45 62 64 53 64 32 64 14 50 0 32 0 Z" fill="currentColor" stroke-width="0"/>
</svg>
                            
                          GitHubu
                        </a>
                    </p>
                

                
    
        <p>Pro PyDataCZ napsala Karla FejfarovÃ¡, 2020.</p>
    

                
    <p>
        Licence:
        <a href="https://creativecommons.org/licenses/by-sa/4.0/">
            Creative Commons Attribution-ShareAlike 4.0 International
        </a>
    </p>
    

                
            </div>
        </div>

        <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.3/umd/popper.min.js" integrity="sha384-vFJXuSJphROIrBnz7yo7oB41mKfc8JzQZiCq4NCceLEaO4IHwicKwpJf9c9IpFgh" crossorigin="anonymous"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/js/bootstrap.min.js" integrity="sha384-alpBpkh1PFOepccYVYDB4do5UnbKysX5WZXm3XxPqe5iKTfUKjNkCk9SaVuEZflJ" crossorigin="anonymous"></script>

        

    </body>
</html>